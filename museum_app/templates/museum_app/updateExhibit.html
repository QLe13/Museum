<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Update Exhibit</title>
    <script>
        "use strict";
        console.log("loaded");
        const getData = () => {
            // console.log("start");
            const formOption = 'Exhibit';
            const id = document.getElementById('inputID');
            document.getElementById('formID').value = id.value;
            // console.log("input:" + formOption.value);
            const route = "/api/" + formOption.toLowerCase() + "s/" + id.value + "?format=json";
            console.log("route:" + route);
            fetch(route, {
                method: 'GET'
            }).then(res => res.json()).then(data => {
                console.log(data);
                if (data.id == document.getElementById('inputID').value){
                    document.getElementById('name').value = data.name;
                    document.getElementById('description').value = data.description;
                    document.getElementById('start_date').value = data.start_date;
                    document.getElementById('end_date').value = data.end_date;
                    document.getElementById('current_ticket_price').value = data.current_ticket_price;
                    document.getElementById('start').setAttribute('hidden', 'true');
                    const resetButton = document.createElement('button');
                    resetButton.setAttribute('id', 'resetButton');
                    resetButton.setAttribute('onclick', 'reset()');
                    resetButton.innerHTML = 'Go Back';
                    document.getElementById('body').appendChild(resetButton);
                    document.getElementById('updateFields').removeAttribute('hidden');
                    console.log('data set');
                }else{
                    console.log('error fetch');
                }
            });
            return 1;
        }
        const reset = () => {
            document.getElementById('start').removeAttribute('hidden');
            document.getElementById('updateFields').setAttribute('hidden', '');
            document.body.removeChild(document.getElementById('resetButton'));
        }
    </script>
</head>

<body id="body">
    <div id="start">
        Enter the ID of an exhibit: <input type="text" id="inputID">
        <br><br>
        <button onclick="getData()">Submit</button>
    </div>
    <form action="/api/v2/updateData/exhibit" method="post">
    <div id="updateFields" hidden="">
        <p>Update the data below as needed:</p>

        {% csrf_token %}
        <input type="hidden" name="id" id="formID">

        <div class="form-group ">

        <label class="col-sm-2 control-label ">
          Name
        </label>


      <div class="col-sm-10">
        <input name="name" class="form-control" type="text" id="name">




      </div>
    </div>



        <div class="form-group ">

        <label class="col-sm-2 control-label ">
          Description
        </label>


      <div class="col-sm-10">
        <textarea name="description" class="form-control" id="description"></textarea>




      </div>
    </div>




        <div class="form-group ">

        <label class="col-sm-2 control-label ">
          Start date
        </label>


      <div class="col-sm-10">
        <input name="start_date" class="form-control" type="date"  id="start_date">




      </div>
    </div>




        <div class="form-group ">

        <label class="col-sm-2 control-label ">
          End date
        </label>


      <div class="col-sm-10">
        <input name="end_date" class="form-control" type="date"  id="end_date">




      </div>
    </div>




        <div class="form-group ">

        <label class="col-sm-2 control-label ">
          Current ticket price
        </label>


      <div class="col-sm-10">
        <input name="current_ticket_price" class="form-control" type="text"  id="current_ticket_price">




      </div>
    </div>




                                  <div class="form-actions">
                                    <button class="btn btn-primary js-tooltip" title="" type="submit">Update</button>
                                  </div>



    </div>

    </form>
</body>

</html>